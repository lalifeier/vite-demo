/**
 * name: @vvap/admin
 * version: v0.0.1
 * description: 
 * author: lalifeier
 * email: lalifeier@gmail.com
 * homepage: https://lalifeier.github.io
 */
var E=(h,c,f)=>new Promise((l,a)=>{var p=_=>{try{b(f.next(_))}catch(U){a(U)}},A=_=>{try{b(f.throw(_))}catch(U){a(U)}},b=_=>_.done?l(_.value):Promise.resolve(_.value).then(p,A);b((f=f.apply(h,c)).next())});import{k as N,r as x,x as w,ac as H,u as F,aj as P,v as T,T as W,q as j,Z as D,a2 as V}from"./vendor.5ada8107.js";var $={exports:{}};(function(h,c){(function(f){h.exports=f()})(function(f){var l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(u,o){var e=u[0],t=u[1],n=u[2],r=u[3];e+=(t&n|~t&r)+o[0]-680876936|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+o[1]-389564586|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+o[2]+606105819|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+o[3]-1044525330|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+o[4]-176418897|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+o[5]+1200080426|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+o[6]-1473231341|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+o[7]-45705983|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+o[8]+1770035416|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+o[9]-1958414417|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+o[10]-42063|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+o[11]-1990404162|0,t=(t<<22|t>>>10)+n|0,e+=(t&n|~t&r)+o[12]+1804603682|0,e=(e<<7|e>>>25)+t|0,r+=(e&t|~e&n)+o[13]-40341101|0,r=(r<<12|r>>>20)+e|0,n+=(r&e|~r&t)+o[14]-1502002290|0,n=(n<<17|n>>>15)+r|0,t+=(n&r|~n&e)+o[15]+1236535329|0,t=(t<<22|t>>>10)+n|0,e+=(t&r|n&~r)+o[1]-165796510|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+o[6]-1069501632|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+o[11]+643717713|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+o[0]-373897302|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+o[5]-701558691|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+o[10]+38016083|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+o[15]-660478335|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+o[4]-405537848|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+o[9]+568446438|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+o[14]-1019803690|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+o[3]-187363961|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+o[8]+1163531501|0,t=(t<<20|t>>>12)+n|0,e+=(t&r|n&~r)+o[13]-1444681467|0,e=(e<<5|e>>>27)+t|0,r+=(e&n|t&~n)+o[2]-51403784|0,r=(r<<9|r>>>23)+e|0,n+=(r&t|e&~t)+o[7]+1735328473|0,n=(n<<14|n>>>18)+r|0,t+=(n&e|r&~e)+o[12]-1926607734|0,t=(t<<20|t>>>12)+n|0,e+=(t^n^r)+o[5]-378558|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+o[8]-2022574463|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+o[11]+1839030562|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+o[14]-35309556|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+o[1]-1530992060|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+o[4]+1272893353|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+o[7]-155497632|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+o[10]-1094730640|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+o[13]+681279174|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+o[0]-358537222|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+o[3]-722521979|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+o[6]+76029189|0,t=(t<<23|t>>>9)+n|0,e+=(t^n^r)+o[9]-640364487|0,e=(e<<4|e>>>28)+t|0,r+=(e^t^n)+o[12]-421815835|0,r=(r<<11|r>>>21)+e|0,n+=(r^e^t)+o[15]+530742520|0,n=(n<<16|n>>>16)+r|0,t+=(n^r^e)+o[2]-995338651|0,t=(t<<23|t>>>9)+n|0,e+=(n^(t|~r))+o[0]-198630844|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+o[7]+1126891415|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+o[14]-1416354905|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+o[5]-57434055|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+o[12]+1700485571|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+o[3]-1894986606|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+o[10]-1051523|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+o[1]-2054922799|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+o[8]+1873313359|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+o[15]-30611744|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+o[6]-1560198380|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+o[13]+1309151649|0,t=(t<<21|t>>>11)+n|0,e+=(n^(t|~r))+o[4]-145523070|0,e=(e<<6|e>>>26)+t|0,r+=(t^(e|~n))+o[11]-1120210379|0,r=(r<<10|r>>>22)+e|0,n+=(e^(r|~t))+o[2]+718787259|0,n=(n<<15|n>>>17)+r|0,t+=(r^(n|~e))+o[9]-343485551|0,t=(t<<21|t>>>11)+n|0,u[0]=e+u[0]|0,u[1]=t+u[1]|0,u[2]=n+u[2]|0,u[3]=r+u[3]|0}function p(u){var o=[],e;for(e=0;e<64;e+=4)o[e>>2]=u.charCodeAt(e)+(u.charCodeAt(e+1)<<8)+(u.charCodeAt(e+2)<<16)+(u.charCodeAt(e+3)<<24);return o}function A(u){var o=[],e;for(e=0;e<64;e+=4)o[e>>2]=u[e]+(u[e+1]<<8)+(u[e+2]<<16)+(u[e+3]<<24);return o}function b(u){var o=u.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,d,B,C;for(t=64;t<=o;t+=64)a(e,p(u.substring(t-64,t)));for(u=u.substring(t-64),n=u.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=u.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(e,r),t=0;t<16;t+=1)r[t]=0;return d=o*8,d=d.toString(16).match(/(.*?)(.{0,8})$/),B=parseInt(d[2],16),C=parseInt(d[1],16)||0,r[14]=B,r[15]=C,a(e,r),e}function _(u){var o=u.length,e=[1732584193,-271733879,-1732584194,271733878],t,n,r,d,B,C;for(t=64;t<=o;t+=64)a(e,A(u.subarray(t-64,t)));for(u=t-64<o?u.subarray(t-64):new Uint8Array(0),n=u.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=u[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(a(e,r),t=0;t<16;t+=1)r[t]=0;return d=o*8,d=d.toString(16).match(/(.*?)(.{0,8})$/),B=parseInt(d[2],16),C=parseInt(d[1],16)||0,r[14]=B,r[15]=C,a(e,r),e}function U(u){var o="",e;for(e=0;e<4;e+=1)o+=l[u>>e*8+4&15]+l[u>>e*8&15];return o}function s(u){var o;for(o=0;o<u.length;o+=1)u[o]=U(u[o]);return u.join("")}s(b("hello"))!=="5d41402abc4b2a76b9719d911017c592",typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function u(o,e){return o=o|0||0,o<0?Math.max(o+e,0):Math.min(o,e)}ArrayBuffer.prototype.slice=function(o,e){var t=this.byteLength,n=u(o,t),r=t,d,B,C,L;return e!==f&&(r=u(e,t)),n>r?new ArrayBuffer(0):(d=r-n,B=new ArrayBuffer(d),C=new Uint8Array(B),L=new Uint8Array(this,n,d),C.set(L),B)}}();function y(u){return/[\u0080-\uFFFF]/.test(u)&&(u=unescape(encodeURIComponent(u))),u}function m(u,o){var e=u.length,t=new ArrayBuffer(e),n=new Uint8Array(t),r;for(r=0;r<e;r+=1)n[r]=u.charCodeAt(r);return o?n:t}function v(u){return String.fromCharCode.apply(null,new Uint8Array(u))}function S(u,o,e){var t=new Uint8Array(u.byteLength+o.byteLength);return t.set(new Uint8Array(u)),t.set(new Uint8Array(o),u.byteLength),e?t:t.buffer}function g(u){var o=[],e=u.length,t;for(t=0;t<e-1;t+=2)o.push(parseInt(u.substr(t,2),16));return String.fromCharCode.apply(String,o)}function i(){this.reset()}return i.prototype.append=function(u){return this.appendBinary(y(u)),this},i.prototype.appendBinary=function(u){this._buff+=u,this._length+=u.length;var o=this._buff.length,e;for(e=64;e<=o;e+=64)a(this._hash,p(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},i.prototype.end=function(u){var o=this._buff,e=o.length,t,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(t=0;t<e;t+=1)n[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(n,e),r=s(this._hash),u&&(r=g(r)),this.reset(),r},i.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},i.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},i.prototype.setState=function(u){return this._buff=u.buff,this._length=u.length,this._hash=u.hash,this},i.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},i.prototype._finish=function(u,o){var e=o,t,n,r;if(u[e>>2]|=128<<(e%4<<3),e>55)for(a(this._hash,u),e=0;e<16;e+=1)u[e]=0;t=this._length*8,t=t.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(t[2],16),r=parseInt(t[1],16)||0,u[14]=n,u[15]=r,a(this._hash,u)},i.hash=function(u,o){return i.hashBinary(y(u),o)},i.hashBinary=function(u,o){var e=b(u),t=s(e);return o?g(t):t},i.ArrayBuffer=function(){this.reset()},i.ArrayBuffer.prototype.append=function(u){var o=S(this._buff.buffer,u,!0),e=o.length,t;for(this._length+=u.byteLength,t=64;t<=e;t+=64)a(this._hash,A(o.subarray(t-64,t)));return this._buff=t-64<e?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},i.ArrayBuffer.prototype.end=function(u){var o=this._buff,e=o.length,t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n,r;for(n=0;n<e;n+=1)t[n>>2]|=o[n]<<(n%4<<3);return this._finish(t,e),r=s(this._hash),u&&(r=g(r)),this.reset(),r},i.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},i.ArrayBuffer.prototype.getState=function(){var u=i.prototype.getState.call(this);return u.buff=v(u.buff),u},i.ArrayBuffer.prototype.setState=function(u){return u.buff=m(u.buff,!0),i.prototype.setState.call(this,u)},i.ArrayBuffer.prototype.destroy=i.prototype.destroy,i.ArrayBuffer.prototype._finish=i.prototype._finish,i.ArrayBuffer.hash=function(u,o){var e=_(new Uint8Array(u)),t=s(e);return o?g(t):t},i})})($);function Z(){return new Worker("/assets/hash.worker.3301bb2f.js",{type:"module"})}const M=2*1024*1024;function R(h,c=M){const f=h.size,l=[];let a=0;for(;a<f;)l.push(h.slice(a,a+c)),a+=c;return l}function q(h,c=M,f=2){const l=h.size,a=[];let p=c;for(a.push(h.slice(0,c));p<l;){if(p+c>=l)a.push(h.slice(p,l));else{const A=p+c/f,b=p+c;a.push(h.slice(p,p+f)),a.push(h.slice(A,A+f)),a.push(h.slice(b-f,b))}p+=c}return a}function I(h){return new Promise(c=>{const f=new Z;f.postMessage({fileChunkList:h}),f.onmessage=l=>{const{hash:a}=l.data;a&&c(a)}})}const z={disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},limit:{type:Number,default:null},accept:{type:String,default:""},autoUpload:{type:Boolean,default:!0},drag:{type:Boolean,default:!1},chunkSize:{type:Number,default:10*1024*1024},threads:{type:Number,default:3},retry:{type:Number,default:3},beforeUpload:{type:Function,default:null},onExceed:{type:Function,default:null},onProgress:{type:Function,default:null},onSuccess:{type:Function,default:null},onError:{type:Function,default:null},onRemove:{type:Function,default:null}};var K=N({name:"Upload",props:z,setup(h,{slots:c}){const f=x(null);function l(s){return E(this,null,function*(){const y=R(s),m=yield I(y);console.log("sampleHash",yield I(q(s))),console.log("hash",yield I(R(s)));const v=[],S=y.map((g,i)=>({fileHash:m,index:i,hash:m+"-"+i,chunk:g,size:g.size,percentage:v.includes(i)?100:0}));console.log(S)})}function a(s){f.value&&(f.value.value="");const{beforeUpload:y,onRemove:m}=h;if(!y)return l(s);const v=y(s);v instanceof Promise?v.then(()=>{l(s)}).catch(()=>{m(null,s)}):v!==!1?l(s):m(null,s)}function p(s){const{limit:y,onExceed:m,autoUpload:v,multiple:S}=h;if(y&&s.length>y){m&&m(s);return}let g=Array.from(s);S||(g=g.slice(0,1)),g.length!==0&&g.forEach(i=>{v&&a(i)})}function A(s){const y=s.target.files;!y||p(y)}function b(){}function _(){}function U(){h.disabled||f.value&&(f.value.value="",f.value.click())}return()=>{var s;return w("div",null,[H(w("input",{ref:f,type:"file",multiple:F(h.multiple),accept:F(h.accept),onChange:A},null),[[P,!1]]),w("div",{onClick:U},[(s=c.default)==null?void 0:s.call(c)]),w("div",{onClick:b},null),w("div",{onClick:_},null)])}}});const O=V("\u4E0A\u4F20"),Q=N({setup(h){const c=l=>{console.log(l)};function f(l){return!0}return(l,a)=>(T(),W("div",null,[w(F(K),{"before-upload":f,onOnSuccess:a[0]||(a[0]=p=>c(p))},{default:j(()=>[w(D,{color:"primary"},{default:j(()=>[O]),_:1})]),_:1})]))}});export{Q as default};
//# sourceMappingURL=upload.7bbb9f47.js.map
