/**
 * name: @vvap/admin
 * version: v0.0.1
 * description: 
 * author: lalifeier
 * email: lalifeier@gmail.com
 * homepage: https://lalifeier.github.io
 */
var N=Object.defineProperty,q=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(e,n,t)=>n in e?N(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,x=(e,n)=>{for(var t in n||(n={}))U.call(n,t)&&C(e,t,n[t]);if(v)for(var t of v(n))O.call(n,t)&&C(e,t,n[t]);return e},S=(e,n)=>q(e,A(n));import{i as z,w as D}from"./index.70794613.js";import{u as I}from"./uuid.80d4ce9e.js";import{k as w,r as g,a as h,w as V,ad as $,u as i,ak as M,al as R,am as K,an as L,x as p,v as W,T as Z,Z as G}from"./vendor.5ada8107.js";const H=["link image media table lists fullscreen quickbars"],J=["undo redo | fullscreen | formatselect alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontsizeselect forecolor backcolor | bold italic underline strikethrough | indent outdent | superscript subscript | removeformat |"];let y=[];function P(){return window.tinymce}const Q=(e,n)=>{const t=document.getElementById(e),o=n||function(){};if(!t){const a=document.createElement("script");a.src=e,a.id=e,document.body.appendChild(a),y.push(o),("onload"in a?b:r)(a)}t&&o&&(P()?o(null,t):y.push(o));function b(a){a.onload=function(){this.onerror=this.onload=null;for(const s of y)s(null,a);y=null},a.onerror=function(){this.onerror=this.onload=null,o(new Error("Failed to load "+e),a)}}function r(a){a.onreadystatechange=function(){if(!(this.readyState!=="complete"&&this.readyState!=="loaded")){this.onreadystatechange=null;for(const s of y)s(null,a);y=null}}}},X={url:{type:String,default:()=>"tinymce/tinymce.min.js"},baseUrl:{type:String,default:()=>"tinymce/tinymce.min.js"},id:{type:String,default:()=>"vue-tinymce-"+I()},modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1},options:{type:Object,default:()=>{}},toolbar:{type:Array,default:J},plugins:{type:Array,default:H},height:{type:[Number,String],required:!1,default:400},width:{type:[Number,String],required:!1,default:"auto"},menubar:{type:String,default:"file edit insert view format table"},language:{type:String,default:"zh_CN"},skin:{type:String,default:"oxide"}};var Y=w({name:"Tinymce",props:X,emits:["init","change","update:modelValue"],setup(e,{emit:n}){let t=!1;const o=g(!1),b=g(null),r=g(null),a=h(()=>e.id);V(()=>e.modelValue,l=>{_(i(r),l)}),V(()=>e.disabled,()=>{k(i(r),e.disabled)}),$(()=>{Q(i(e.url),l=>{if(l){console.error(l.message);return}d()}),M(()=>{t=!0})}),R(()=>{t&&d()}),K(()=>{s()}),L(()=>{s()});function s(){o.value&&tinymce.get(i(a)).execCommand("mceFullScreen"),tinymce&&tinymce.get(i(a)).destroy()}const c=h(()=>{const{height:l,toolbar:u,plugins:j,menubar:B,options:E}=e;return S(x({selector:`#${i(a)}`,language:i(e.language),skin:i(e.skin),height:l,toolbar:u,menubar:B,plugins:j,branding:!1,object_resizing:!1,default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0},E),{init_instance_callback:f=>{f.on("NodeChange Change KeyUp SetContent",()=>{const m=f.getContent();n("update:modelValue",m),n("change",m)}),f.on("WordCountUpdate",function(m){console.log(m.wordCount)})},setup(f){r.value=f,f.on("FullscreenStateChanged",m=>{o.value=m.state})},convert_urls:!1})});function d(){tinymce.init(i(c)).then(l=>{_(i(r),e.modelValue),k(i(r),e.disabled),n("init",l)}).catch(l=>{console.error(l)})}function _(l,u){l&&u!==l.getContent()&&l.setContent(u)}function k(l,u=!0){!l||l.mode.set(u?"readonly":"design")}const F=h(()=>o.value?"tinymce-container fullscreen":"tinymce-container"),T=h(()=>{const{width:l}=e;let u=`${l}`;return z(u)&&(u=`${u}px`),{width:u}});return()=>p("div",{class:F.value,style:T.value},[p("textarea",{id:a.value,ref:b},null)])}});const ee=D(Y);const ie=w({setup(e){const n=g("123"),t=g(!1),o=g("oxide-dark");function b(){}function r(){n.value="qeeeeeeeeeeeeee",t.value=!i(t),o.value="oxide-dark"}const a={ax_wordlimit_num:40,ax_wordlimit_callback:function(s,c,d){console.log("\u5F53\u524D\u5B57\u6570\uFF1A"+c.length+"\uFF0C\u9650\u5236\u5B57\u6570\uFF1A"+d)},characterlimit_min:5,characterlimit_max:10,charwordcount_include_tags:!1};return(s,c)=>(W(),Z("div",null,[p(i(ee),{plugins:["link image media table lists fullscreen quickbars charactercount"],modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),disabled:t.value,onChange:b,options:a},null,8,["modelValue","disabled"]),p(G,{color:"primary",onClick:r})]))}});export{ie as default};
//# sourceMappingURL=tinymce.f5536a7a.js.map
